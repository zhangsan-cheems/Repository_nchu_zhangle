<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Login</title>
    <link rel="stylesheet" href="font-awesome-4.7.0/login.css">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
<div id="login-box">
    <h1>南航邮箱系统</h1>
    <div class="form">
        <div class="item">
            <i class="fa fa-user" aria-hidden="true"></i>
            <input type="text" placeholder="手机号" id="phonenum">
        </div>
        <div class="item">
            <i class="fa fa-key" aria-hidden="true"></i>
            <input type="password" placeholder="密码" id="password">
        </div>
    </div>
    <button onclick="login()">登陆</button><br>
    <button onclick="register()">注册</button>
</div>

<script>
    
    function register() {
        window.location.href="http://localhost:8080/register.html";
    }

    function login() {
        var pn=document.getElementById("phonenum").value;
        var pw=document.getElementById("password").value;

        $.ajax({url:"/login",data:{"phoneNum":pn,"password":pw},success:function (result) {
                    if(result==="success"){
                        //重定向
                        window.location.href="http://localhost:8080/main.html";
                    }
                    if(result==="fail"){
                        alert("密码错误！");
                        return;
                    }
            }})

        // 通过js创建表单的方式将内容提交给服务器
        // var form=document.createElement("form");
        // var phonenum=document.createElement("input");
        // var password=document.createElement("input");
        // phonenum.setAttribute("name","phoneNum");
        // phonenum.setAttribute("value",pn);
        // password.setAttribute("name","password");
        // password.setAttribute("value",pw);
        // form.appendChild(phonenum);
        // form.appendChild(password);
        // form.method="post";
        // form.action="/login";
        // $("body").append(form);
        // form.submit();
    }
    
</script>

</body>
</html>